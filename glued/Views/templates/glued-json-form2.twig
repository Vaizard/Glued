<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="robots" content="noindex, nofollow">
  <meta name="googlebot" content="noindex, nofollow">
    
    <script type="text/javascript" src="https://fiddle.jshell.net/js/babel/babel.js"></script>
    
    <script src="https://unpkg.com/react@15/dist/react.min.js"></script>
    <script src="https://unpkg.com/react-dom@15/dist/react-dom.min.js"></script>
    
    <script src="https://unpkg.com/react-jsonschema-form/dist/react-jsonschema-form.js"></script>
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ base_url() }}/css/glued.css">
    
  <title>json schema template</title>

<script type="text/babel">
const Form = JSONSchemaForm.default;



const uiSchema = {{ json_uischema_output | raw }};

const schema = {{ json_schema_output | raw }};

const formData = {{ json_formdata_output | raw }};


function onSubmit(formData) {
    
    $.ajax({
      url: 'https://japex.vaizard.xyz/glued/public/accounting/editcost/{{ cost_id | raw }}',
      dataType: 'text',
      type: 'PUT',
      data: 'billdata=' + JSON.stringify(formData.formData),
      success: function(data) {
        
        ReactDOM.render((<div><h1>Record was updated succesfully</h1><pre>{JSON.stringify(formData.formData, null, 2) }</pre></div>), 
                 document.getElementById("main"));
        
      },
      error: function(xhr, status, err) {
        
        ReactDOM.render((<div><h1>Something goes wrong ! not saving.</h1><pre>{JSON.stringify(formData.formData, null, 2) }</pre></div>), 
                 document.getElementById("main"));
        alert('xhr status: ' + xhr.status + ', status: ' + status + ', err: ' + err)
      }
    });
    
}

function onChange(formData) { }

ReactDOM.render((<Form onChange={onChange} onSubmit={onSubmit} uiSchema={uiSchema} schema={schema} formData={formData}></Form>),
    document.getElementById("main"));

</script>


</head>

<body>
    {% include 'templates/partials/navigation.twig' %}
    
  <div class="container">
    {% include 'templates/partials/flash.twig' %}
    {% block content %}{% endblock %}
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


</body>

</html>